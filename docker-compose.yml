version: '3.4'

services:
  photoengine-frontend:
    image: photoenginefrontend
    environment:
        - gatewayapiurl=http://apigatewayengine
    build:
      context: ./photoengine-frontend
      dockerfile: Dockerfile
    depends_on:
        - api-gatewayengine
    ports:
    - "5100:80"
  api-gatewayengine:
    image: apigatewayengine
    environment:
        - peapiurl=http://photoengineapi
    build:
      context: ./api-gatewayengine
      dockerfile: Dockerfile
    depends_on:
        - photoengiine-api
    ports:
    - "5100:80"
  photoengiine-api:
    image: photoengineapi
    build:
        context: ./photoengiine-api
        dockerfile: Dockerfile
    expose:
      - "80"
    ports:
      - "5101:80"